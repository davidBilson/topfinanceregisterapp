<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="./scriptstyle.css">
    <title>TopFinanceStream - Customer Entry</title>
    <style>
        body {
            padding: 0 20px;
        }
        @media (max-width:600px)
        {
        
        }
    </style>
</head>
<body>
    <section class="nav">
        <h1>TopFinance<span style="color: dodgerblue;">Stream</span></h1>
    </section>
    <h1></h1>
    <section class="login-section" id="register">
        <header>
            <h1>Sign Up</h1>
        </header>
        <div class="login-panel">
            
                <label for="username">Username</label>
                <input autocomplete="on" type="username" id="uusername" class="inputs" placeholder="Enter your username" required>
                <label for="email">Email</label><br>
                <input autocomplete="on" class="inputs" type="email" name="email" id="eemail" placeholder="janedoe@email.com" required><br>
                <label for="password">Password</label><br>
                <input autocomplete="on" class="inputs" type="password" name="password" id="ppassword" placeholder="password" required><br>
                <button class="loginBtn" id="signUp">Sign Up</button>
            
            <a id="loginBtn" >Already have an account yet? Login here</a>
        </div>
    </section>
    



    <section class="login-section" id="loginUser">
        <header>
            <h1>Login</h1>
        </header>
        <div class="login-panel">
          
                <label for="username">Username</label><br>
                <input class="inputs" type="text" name="username" id="loginUser" placeholder="Enter username" required><br>
                <label for="password">Password</label><br>
                <input class="inputs" type="password" name="password" id="loginPassword" placeholder="password" required><br>
                <button class="loginBtn" >Login</button>
           
            <a id="registerBtn">Don't have an account? Create account</a>
        </div>
    </section>
    
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-app.js";
        import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-database.js";
        import { getAuth, createUserWithEmailAndPassword,  signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.1/firebase-auth.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyARCd056AfMuUn67jWiHCTQUzf2eVPCqfM",
          authDomain: "signuptopfinance.firebaseapp.com",
          databaseURL: "https://signuptopfinance-default-rtdb.firebaseio.com",
          projectId: "signuptopfinance",
          storageBucket: "signuptopfinance.appspot.com",
          messagingSenderId: "251085703386",
          appId: "1:251085703386:web:a7fd3bdf55122c591bbde3"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const auth = getAuth();

        let signUp = document.getElementById('signUp');
        signUp.addEventListener('click', (e)=>{
            let username = document.getElementById('uusername').value;
            let email = document.getElementById('eemail').value;
            let password = document.getElementById('ppassword').value;

        createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
        // Signed in 
        const user = userCredential.user;
        set(ref(database, 'users/' + user.uid), {
            username:username,
            email:email
        })
        alert('user created');
        // ...
        })
        .catch((error) => {
        const errorCode = error.code;
        const errorMessage = error.message;

        alert(errorMessage);
        // ..
        });

        });

         login.addEventListener('click', (e)=>{

            signInWithEmailAndPassword(auth, email, password)
            .then((userCredential) => {
            // Signed in 
            const user = userCredential.user;
            // ...
            })
            .catch((error) => {
            const errorCode = error.code;
            const errorMessage = error.message;
            });


         });
      </script>
    <script src="./app.js"></script>
</body>
</html>